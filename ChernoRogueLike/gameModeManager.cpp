//=============================================================================
//
// ゲームモード管理処理 [modeManager.h]
// Author : SORA ENOMOTO
//
//=============================================================================
#include "stdafx.h"

#include "gameModeManager.h"


//=============================================================================
// CModeManagerコンストラクタ
//=============================================================================
CGameModeManager::CGameModeManager() :m_dwRef(0),
m_pMode(nullptr)
{
}

//=============================================================================
// CModeManagerデストラクタ
//=============================================================================
CGameModeManager::~CGameModeManager()
{
	Release();
}

//=============================================================================
// 参照コピー
//=============================================================================
HRESULT CGameModeManager::QueryInterface(REFIID riid, void FAR* FAR* ppvObject)
{
	if (IsEqualIID(riid, IID_IUnknown))
	{
		*ppvObject = this;
		AddRef();
		return NOERROR;
	}
	return E_NOINTERFACE;
}

//=============================================================================
// 参照カウンタインクリメント
//=============================================================================
ULONG CGameModeManager::AddRef(void)
{
	return ++m_dwRef;
}

//=============================================================================
// 終了処理
//=============================================================================
ULONG CGameModeManager::Release(void)
{
	if (--m_dwRef == 0)
	{
		delete this;
		return 0;
	}
	return m_dwRef;
}

//=============================================================================
// 初期化処理
//=============================================================================


//=============================================================================
// ゲームモードのロード
//=============================================================================


//=============================================================================
// デバイスロスト時
//=============================================================================
void CGameModeManager::OnLostDevice(void)
{
	m_pMode->OnLostDevice();

	m_pMode->Init();
}
